!function(){const e="phcode_user_consent",n=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","UK","CH"],t=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Valletta","Europe/Amsterdam","Europe/Warsaw","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Europe/Madrid","Europe/Stockholm","Atlantic/Reykjavik","Atlantic/Faroe","Atlantic/Canary"];const o=function(){var e;const o=Intl.DateTimeFormat().resolvedOptions().timeZone||"",a=navigator.languages&&navigator.languages[0]||navigator.language||"",r=(null==(e=a.split("-")[1])?void 0:e.toUpperCase())||"",s=t.includes(o),i=r&&n.includes(r),c=s||i;return console.log("Region detected (initial):",{timezone:o,language:a,isEUTimezone:s,isEULang:i,finalDecision:c?"EU":"Non-EU"}),c}();function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],o?(a("consent","default",{analytics_storage:"denied",ad_storage:"denied",functionality_storage:"denied",personalization_storage:"denied",security_storage:"granted",wait_for_update:500}),console.log("Cookie consent Mode: EU region detected - default DENIED")):(a("consent","default",{analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"}),console.log("Cookie consent Mode: Non-EU region detected"));const r={getStoredConsent:function(){try{const n=localStorage.getItem(e);if(!n)return null;const t=JSON.parse(n);return new Date(t.expiry)<new Date?(this.clearConsent(),null):t}catch(n){return console.error("Error reading consent:",n),null}},saveConsent:function(n){try{const t=new Date;t.setDate(t.getDate()+365);const o={granted:n,timestamp:(new Date).toISOString(),expiry:t.toISOString()};return localStorage.setItem(e,JSON.stringify(o)),!0}catch(t){return console.error("Error saving consent:",t),!1}},clearConsent:function(){try{localStorage.removeItem(e)}catch(n){console.error("Error clearing consent:",n)}},updateGoogleConsent:function(e){const n=e?"granted":"denied";a("consent","update",{analytics_storage:n,ad_storage:n,functionality_storage:n,personalization_storage:n}),a("event","consent_update",{consent_granted:e,event_category:"consent",event_label:e?"accepted":"rejected"})},acceptAll:function(){this.saveConsent(!0),this.updateGoogleConsent(!0),this.hideBanner(),console.log("User consent: All cookies accepted")},rejectAll:function(){this.saveConsent(!1),this.updateGoogleConsent(!1),this.hideBanner(),console.log("User consent: All cookies rejected")},closeBanner:function(){this.hideBanner(),console.log("User consent: Banner closed without choice")},showBanner:function(){const e=document.getElementById("consent-banner");e&&e.classList.add("show")},hideBanner:function(){const e=document.getElementById("consent-banner");e&&e.classList.remove("show")},initialize:function(){if(!o)return void console.log("Non-EU visitor: No cookie banner needed");const e=this.getStoredConsent();null!==e?(this.updateGoogleConsent(e.granted),console.log("EU visitor - User consent loaded:",e.granted?"Granted":"Denied")):(console.log("EU visitor: No stored consent, showing banner"),this.showBanner()),this.setupEventListeners()},setupEventListeners:function(){const e=document.getElementById("consent-accept"),n=document.getElementById("consent-reject"),t=document.getElementById("consent-close");e&&e.addEventListener("click",()=>this.acceptAll()),n&&n.addEventListener("click",()=>this.rejectAll()),t&&t.addEventListener("click",()=>this.closeBanner())}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>r.initialize()):r.initialize(),window.ConsentManager=r}();
